{"ast":null,"code":"import _classCallCheck from\"/Users/jamesverschleiser/VisuOL/21f-visuol/visuol/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jamesverschleiser/VisuOL/21f-visuol/visuol/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jamesverschleiser/VisuOL/21f-visuol/visuol/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jamesverschleiser/VisuOL/21f-visuol/visuol/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";// Credit to https://ant.design/components/form/\n// Component for logging in\nimport{Form,Input,Button,notification}from'antd';import React,{Component}from'react';import'antd/dist/antd.css';import axios from'axios';import{withRouter}from'react-router-dom';import{BASE_URL}from'./OfferAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.finishLogin=function(response){localStorage.setItem('token',response.data.session_token);localStorage.setItem('expiration',response.data.expiration);var _this$props=_this.props,history=_this$props.history,match=_this$props.match;// https://stackoverflow.com/questions/63679919/react-router-push-to-history-and-preserve-relative-path\nhistory.push(\"\".concat(match.url.substring(0,match.url.lastIndexOf('/')+1)));window.location.reload();};_this.onFinish=function(values){axios.post(\"\".concat(BASE_URL,\"api_v1/login\"),values).then(function(response){if(response.data&&response.data.status==='success'){_this.finishLogin(response);}else if(response.data){notification.open({message:'Message',description:response.data.error,onClick:function onClick(){}});}}).catch(function(error){console.log(error);});};_this.onFinishFailed=function(errorInfo){console.log('Failed:',errorInfo);};_this.state={// sessionToken: '',\n};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Form,{name:\"basic\",labelCol:{span:8},wrapperCol:{span:10},initialValues:{remember:true},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Email\",name:\"email\",rules:[{required:true,message:'Please input your email!'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Password\",name:\"password\",rules:[{required:true,message:'Please input your password!'}],children:/*#__PURE__*/_jsx(Input.Password,{})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:12,span:10},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",style:{background:'grey',borderColor:'grey'},children:\"Submit\"})})]});}}]);return Login;}(Component);export default withRouter(Login);","map":{"version":3,"sources":["/Users/jamesverschleiser/VisuOL/21f-visuol/visuol/src/Login.jsx"],"names":["Form","Input","Button","notification","React","Component","axios","withRouter","BASE_URL","Login","props","finishLogin","response","localStorage","setItem","data","session_token","expiration","history","match","push","url","substring","lastIndexOf","window","location","reload","onFinish","values","post","then","status","open","message","description","error","onClick","catch","console","log","onFinishFailed","errorInfo","state","span","remember","required","offset","background","borderColor"],"mappings":"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","sourcesContent":["// Credit to https://ant.design/components/form/\n// Component for logging in\nimport {\n  Form, Input, Button, notification,\n} from 'antd';\nimport React, { Component } from 'react';\nimport 'antd/dist/antd.css';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { BASE_URL } from './OfferAPI';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // sessionToken: '',\n    };\n  }\n\n  finishLogin = (response) => {\n    localStorage.setItem('token', response.data.session_token);\n    localStorage.setItem('expiration', response.data.expiration);\n\n    const { history, match } = this.props;\n    // https://stackoverflow.com/questions/63679919/react-router-push-to-history-and-preserve-relative-path\n    history.push(`${match.url.substring(0, match.url.lastIndexOf('/') + 1)}`);\n    window.location.reload();\n  }\n\n  onFinish = (values) => {\n    axios.post(`${BASE_URL}api_v1/login`, values).then((response) => {\n      if (response.data && response.data.status === 'success') {\n        this.finishLogin(response);\n      } else if (response.data) {\n        notification.open({\n          message: 'Message',\n          description:\n            response.data.error,\n          onClick: () => {},\n        });\n      }\n    }).catch((error) => {\n      console.log(error);\n    });\n  };\n\n   onFinishFailed = (errorInfo) => {\n     console.log('Failed:', errorInfo);\n   };\n\n   render() {\n     return (\n       <Form\n         name='basic'\n         labelCol={{\n           span: 8,\n         }}\n         wrapperCol={{\n           span: 10,\n         }}\n         initialValues={{\n           remember: true,\n         }}\n         onFinish={this.onFinish}\n         onFinishFailed={this.onFinishFailed}\n         autoComplete='off'\n       >\n         <Form.Item\n           label='Email'\n           name='email'\n           rules={[\n             {\n               required: true,\n               message: 'Please input your email!',\n             },\n           ]}\n         >\n           <Input />\n         </Form.Item>\n\n         <Form.Item\n           label='Password'\n           name='password'\n           rules={[\n             {\n               required: true,\n               message: 'Please input your password!',\n             },\n           ]}\n         >\n           <Input.Password />\n         </Form.Item>\n\n         <Form.Item\n           wrapperCol={{\n             offset: 12,\n             span: 10,\n           }}\n         >\n           <Button type='primary' htmlType='submit' style={{ background: 'grey', borderColor: 'grey' }}>\n             Submit\n           </Button>\n         </Form.Item>\n       </Form>\n     );\n   }\n}\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}