import t from"react";import e from"prop-types";const n=(...t)=>t.filter(Boolean).join(" "),i=(t,e)=>{const{offsetTop:n,offsetLeft:i}=t,{width:o,height:r}=t.getBoundingClientRect();e({top:n,left:i,minWidth:o,minHeight:r,maxWidth:o,maxHeight:r})},o=(t,e)=>t.findIndex((t=>t.value===e));function r({timeState:e,buttons:n,activeIndex:i,options:o}){return e?t.createElement("span",null,(r=o.toggleContext,s=n[i].text,null==r?s:r)):null;var r,s}function s({isFirstMounting:e,timeState:i,buttons:o,activeIndex:s,transition:c,btnPosition:u,options:a}){return e?t.createElement("div",{className:n("sweep-button-item","sweep-button-item-active",o[s].activeItemClass),style:Object.assign({transition:`${c}s`},u)},t.createElement(r,{timeState:i,buttons:o,activeIndex:s,options:a})):null}function c(){return c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c.apply(this,arguments)}function u({Button:e="div",text:i,value:o,className:r,index:s,handleBtnClick:u,props:a={}}){return t.createElement(e,c({className:n("sweep-button-item",r),onClick:u(a.onClick,s,o)},a),t.createElement("span",null,i))}function a({buttons:e,handleBtnClick:n}){return e.map((({key:e,...i},o)=>t.createElement(u,c({key:o+"switch-multi--btns",handleBtnClick:n,index:o},i))))}function l(){const[e,n]=t.useState(!1);return t.useEffect((()=>{const t=function(t,e=400){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>n((t=>!t))));return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]),e}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".switch-multi-button{background:#c4dbff;gap:3px;height:intrinsic;height:-moz-max-content;height:-webkit-max-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:0;padding:3px;position:relative;width:intrinsic;width:-moz-max-content;width:-webkit-max-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.switch-multi-button,.switch-multi-button .sweep-button-item{align-items:center;border-radius:3px;box-sizing:border-box;display:flex}.switch-multi-button .sweep-button-item{color:#0c277a;cursor:pointer;gap:4px;justify-content:center;padding:8px 15px}.switch-multi-button .sweep-button-item-active{background:#063ee5;box-sizing:border-box;color:#fff;cursor:default;position:absolute!important}");const d={toggleContext:void 0,removeCss:!1,userSelect:"none"};function m({className:e,style:r,buttons:c,value:u,setValue:m,changeTo:p,transition:f,direction:b,options:h}){h=Object.assign({},d,h);const x=t.useRef(),g=t.useRef({value:u,index:o(c,u)}),[v,w]=t.useState(!1),y=l(),[C,E]=function(e=350){const[n,i]=t.useState(!0);return[n,t.useCallback((()=>{i(!1),setTimeout((()=>{i(!0)}),e+100)}),[])]}(1e3*Number(f)),[k,S]=t.useState({}),T=(t,e)=>{const n="value"===t,r=n?o(c,e):e,s=n?e:c[e].value;if(r!==g.current.index&&s!==g.current.value){const t=[...x.current.children];E(),i(t[r],S),g.current.index=r,m(s)}};return t.useEffect((()=>{p&&(g.current.value=u)}),[u]),t.useEffect((()=>{v||(w(!0),p&&(p.current={},p.current.byValue=T.bind(null,"value"),p.current.byIndex=T.bind(null,"index"))),(()=>{const t=[...x.current.children],e=o(c,u);i(t[e],S)})()}),[y]),t.createElement("div",{ref:x,className:n(!h.removeCss&&"switch-multi-button",e,c[g.current.index].activeRootClass),style:Object.assign({},r,{direction:b,userSelect:h.userSelect})},t.createElement(a,{buttons:c,handleBtnClick:(t,e,n)=>o=>{t&&t(o),E(),i(o.currentTarget,S),g.current.index=e,m(n)}}),t.createElement(s,{isFirstMounting:v,timeState:C,buttons:c,activeIndex:g.current.index,transition:f,btnPosition:k,options:h}))}m.defaultProps={style:{},transition:.4,direction:"ltr",options:d,buttons:[]},m.propTypes={style:e.object,value:e.oneOfType([e.string,e.number]).isRequired,setValue:e.func.isRequired,changeTo:e.object,buttons:e.array.isRequired,className:e.string,transition:e.number,direction:e.oneOf(["ltr","rtl"]),options:e.object};export{m as SwitchMultiButton};
