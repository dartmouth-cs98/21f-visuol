"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),e=require("prop-types");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=n(t),o=n(e);const u=(...t)=>t.filter(Boolean).join(" "),r=(t,e)=>{const{offsetTop:n,offsetLeft:i}=t,{width:o,height:u}=t.getBoundingClientRect();e({top:n,left:i,minWidth:o,minHeight:u,maxWidth:o,maxHeight:u})},a=(t,e)=>t.findIndex((t=>t.value===e));function s({timeState:t,buttons:e,activeIndex:n,options:o}){return t?i.default.createElement("span",null,(u=o.toggleContext,r=e[n].text,null==u?r:u)):null;var u,r}function l({isFirstMounting:t,timeState:e,buttons:n,activeIndex:o,transition:r,btnPosition:a,options:l}){return t?i.default.createElement("div",{className:u("sweep-button-item","sweep-button-item-active",n[o].activeItemClass),style:Object.assign({transition:`${r}s`},a)},i.default.createElement(s,{timeState:e,buttons:n,activeIndex:o,options:l})):null}function c(){return c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c.apply(this,arguments)}function d({Button:t="div",text:e,value:n,className:o,index:r,handleBtnClick:a,props:s={}}){return i.default.createElement(t,c({className:u("sweep-button-item",o),onClick:a(s.onClick,r,n)},s),i.default.createElement("span",null,e))}function f({buttons:t,handleBtnClick:e}){return t.map((({key:t,...n},o)=>i.default.createElement(d,c({key:o+"switch-multi--btns",handleBtnClick:e,index:o},n))))}function m(){const[t,e]=i.default.useState(!1);return i.default.useEffect((()=>{const t=function(t,e=400){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}}((()=>e((t=>!t))));return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]),t}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".switch-multi-button{background:#c4dbff;gap:3px;height:intrinsic;height:-moz-max-content;height:-webkit-max-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:0;padding:3px;position:relative;width:intrinsic;width:-moz-max-content;width:-webkit-max-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.switch-multi-button,.switch-multi-button .sweep-button-item{align-items:center;border-radius:3px;box-sizing:border-box;display:flex}.switch-multi-button .sweep-button-item{color:#0c277a;cursor:pointer;gap:4px;justify-content:center;padding:8px 15px}.switch-multi-button .sweep-button-item-active{background:#063ee5;box-sizing:border-box;color:#fff;cursor:default;position:absolute!important}");const p={toggleContext:void 0,removeCss:!1,userSelect:"none"};function b({className:t,style:e,buttons:n,value:o,setValue:s,changeTo:c,transition:d,direction:b,options:h}){h=Object.assign({},p,h);const x=i.default.useRef(),g=i.default.useRef({value:o,index:a(n,o)}),[v,w]=i.default.useState(!1),y=m(),[C,E]=function(t=350){const[e,n]=i.default.useState(!0);return[e,i.default.useCallback((()=>{n(!1),setTimeout((()=>{n(!0)}),t+100)}),[])]}(1e3*Number(d)),[k,S]=i.default.useState({}),j=(t,e)=>{const i="value"===t,o=i?a(n,e):e,u=i?e:n[e].value;if(o!==g.current.index&&u!==g.current.value){const t=[...x.current.children];E(),r(t[o],S),g.current.index=o,s(u)}};return i.default.useEffect((()=>{c&&(g.current.value=o)}),[o]),i.default.useEffect((()=>{v||(w(!0),c&&(c.current={},c.current.byValue=j.bind(null,"value"),c.current.byIndex=j.bind(null,"index"))),(()=>{const t=[...x.current.children],e=a(n,o);r(t[e],S)})()}),[y]),i.default.createElement("div",{ref:x,className:u(!h.removeCss&&"switch-multi-button",t,n[g.current.index].activeRootClass),style:Object.assign({},e,{direction:b,userSelect:h.userSelect})},i.default.createElement(f,{buttons:n,handleBtnClick:(t,e,n)=>i=>{t&&t(i),E(),r(i.currentTarget,S),g.current.index=e,s(n)}}),i.default.createElement(l,{isFirstMounting:v,timeState:C,buttons:n,activeIndex:g.current.index,transition:d,btnPosition:k,options:h}))}b.defaultProps={style:{},transition:.4,direction:"ltr",options:p,buttons:[]},b.propTypes={style:o.default.object,value:o.default.oneOfType([o.default.string,o.default.number]).isRequired,setValue:o.default.func.isRequired,changeTo:o.default.object,buttons:o.default.array.isRequired,className:o.default.string,transition:o.default.number,direction:o.default.oneOf(["ltr","rtl"]),options:o.default.object},exports.SwitchMultiButton=b;
